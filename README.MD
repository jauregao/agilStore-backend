# AgilStore - Gerenciamento de Invent√°rio de Produtos
## üöÄ Tecnologias e Ferramentas
- Tecnologia: Typescript e NodeJS
- Framework: Express
- Bibliotecas:
  - nodemon e ts-node: executar os arquivos .ts em ambiente de desenvolvimento;
  - uuid: criar de uuid's √∫nicos;
  - zod: validar os inputs enviados no body da requisi√ß√£o;
  - dotenv: carregar vari√°veis de ambiente;
  - path: nativa do nodejs, realiza a convers√£o dos caminhos;
  - file system (fs): tamb√©m nativa do nodejs, realiza a leitura e escrita em arquivos;


## üì¶ Instala√ß√£o e Depend√™ncias
Clone o reposit√≥rio utilizando o comando abaixo:
```
git clone git@github.com:jauregao/agilStore-backend.git
```
Instalando as depend√™ncias
Ap√≥s clonar o reposit√≥rio, instale as depend√™ncias com o comando:

```
npm install
```

## üõ†Ô∏è Como rodar a aplica√ß√£o
Execute o comando abaixo para rodar o servidor:

```bash
npm run dev
```

Por padr√£o, aplica√ß√£o estar√° dispon√≠vel no endere√ßo http://localhost:3000 ou http://localhost:<sua_porta_favorita>.

## ‚òï Auxiliares

Anexado os arquivos:
 - `teste.http` para ser utilizado com a extens√£o [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client)
 - `agilstore.postman_collection.json` para ser importado no postman ou insomnia.

 Ambos arquivos est√£o previamente configurados para realizar os testes.

## üíª Rotas da API
A seguir est√£o as rotas dispon√≠veis para interagir com o sistema:

### **1. Adicionar Produto**

  - **POST /product**  
  Adiciona um novo produto ao invent√°rio.

  **Body (JSON):**
  ```json
  {
    "nome": "Smartphone X",
    "categoria": "Smartphones",
    "qtd_estoque": 100,
    "preco": 1999.99
  }
  ```

  **Response (JSON):**
  ```json
  { 
    "id": 1,
    "nome": "Smartphone X",
    "categoria": "Smartphones",
    "qtd_estoque": 100,
    "preco": 1999.99
  }
  ```

### **2. Listar Produtos**
  - **GET /products**  

 **Par√¢metros de Consulta (Query Parameters)**:
  - `categoria` (opcional): Filtra os produtos pela categoria. A busca √© feita sem acentua√ß√£o e caracteres especiais.
  - `ordem` (opcional): Define o campo de ordena√ß√£o. Pode ser um dos seguintes:
    - `nome`: Ordena os produtos pelo nome.
    - `quantidade`: Ordena os produtos pela quantidade em estoque.
    - `preco`: Ordena os produtos pelo pre√ßo.
  - `modo` (opcional): Define a dire√ß√£o da ordena√ß√£o. Pode ser um dos seguintes:
    - `asc`: Ordem crescente (padr√£o).
    - `desc`: Ordem decrescente.

  **Exemplo de requisi√ß√£o**:

```
GET /products?categoria=Smartphones&ordem=nome&modo=asc
```

  **Response (JSON):**
  ```json
  [
    {
      "id": "2",
      "nome": "Laptop Y",
      "categoria": "Laptops",
      "qtd_estoque": 50,
      "preco": 4999.99
    },
    {
      "id": "1",
      "nome": "Smartphone X",
      "categoria": "Smartphones",
      "qtd_estoque": 100,
      "preco": 1999.99
    }
  ]
  ```

### **3. Buscar Produto**

  - **GET /product/:param**  
  Busca os detalhes de um produto espec√≠fico pelo id ou parte do nome.
  Par√¢metro: param pode ser o id ou um trecho do nome do produto.


  **Response (JSON):**
  ```json
  {
    "id": "1",
    "nome": "Smartphone X",
    "categoria": "Smartphones",
    "qtd_estoque": 100,
    "preco": 1999.99
  }
  ```

### **4. Atualizar Produto**

  - **PATCH /product/:id**  
  Atualiza as informa√ß√µes de um produto existente identificado pelo id. Pode ser enviado um ou mais campos e deve ser enviado pelo menos um campo.

  **Body (JSON):**
  ```json
  {
    "qtd_estoque": 100,
    "preco": 1999.99
  }
  ```

  **Response (JSON):**
  ```json
  {
    "id": "1",
    "nome": "Smartphone X",
    "categoria": "Smartphones",
    "qtd_estoque": 100,
    "preco": 1999.99
  }
  ```

  ### **5. Excluir Produto**

  - **DELETE /product/:id**  
  Remove um produto do invent√°rio identificado pelo id.
  A confirma√ß√£o de exclus√£o n√£o foi implementada nesta funcionalidade porque, geralmente, a confirma√ß√£o de a√ß√µes cr√≠ticas como exclus√£o de dados √© realizada no frontend. Fazer a confirma√ß√£o no backend n√£o √© uma boa pr√°tica, pois implica em mais tr√°fego de rede e l√≥gica adicional no servidor, o que pode impactar a performance e aumentar a complexidade do c√≥digo.

  **Response:**
  - Caso a exclus√£o seja bem-sucedida:
    Status: `204 No Content`
  
  - Caso o id informado n√£o exista no invent√°rio:
    Status: `404 Not Found`
    ```json
    {
      "message": "Produto n√£o encontrado."
    }
    ```